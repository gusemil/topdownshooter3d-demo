[gd_scene load_steps=33 format=2]

[ext_resource path="res://graphics/textures/concrete_cracked_2070_2531_Small.jpg" type="Texture" id=1]
[ext_resource path="res://graphics/fonts/AmazDooMLeft.ttf" type="DynamicFontData" id=2]
[ext_resource path="res://scripts/GameManager.gd" type="Script" id=3]
[ext_resource path="res://scripts/WaveManager.gd" type="Script" id=4]
[ext_resource path="res://graphics/ui_graphics/buttonStock1.png" type="Texture" id=5]
[ext_resource path="res://scripts/NonPositionalSoundManager.gd" type="Script" id=6]
[ext_resource path="res://scripts/MusicManager.gd" type="Script" id=7]
[ext_resource path="res://scenes/Pickups/Shotgun_Ammo_Pickup.tscn" type="PackedScene" id=8]
[ext_resource path="res://scripts/LootManager.gd" type="Script" id=9]
[ext_resource path="res://scenes/Pickups/Machinegun_Ammo_Pickup.tscn" type="PackedScene" id=10]
[ext_resource path="res://scenes/Pickups/RocketLauncher_Ammo_Pickup.tscn" type="PackedScene" id=11]
[ext_resource path="res://scenes/Pickups/Health_Pickup.tscn" type="PackedScene" id=12]
[ext_resource path="res://scenes/Pickups/Armor_Pickup.tscn" type="PackedScene" id=13]
[ext_resource path="res://scenes/Pickups/Powerup_Quad_Damage.tscn" type="PackedScene" id=14]
[ext_resource path="res://scenes/Pickups/Powerup_Undying.tscn" type="PackedScene" id=15]
[ext_resource path="res://scenes/Pickups/Powerup_Speed_Boost.tscn" type="PackedScene" id=16]
[ext_resource path="res://graphics/materials/walls.material" type="Material" id=17]
[ext_resource path="res://graphics/textures/skybox.png" type="Texture" id=18]
[ext_resource path="res://scenes/Enemy/RangedBossEnemy.tscn" type="PackedScene" id=19]
[ext_resource path="res://scenes/Enemy/RangedEnemy.tscn" type="PackedScene" id=20]

[sub_resource type="DynamicFont" id=1]
size = 200
font_data = ExtResource( 2 )

[sub_resource type="DynamicFont" id=2]
size = 50
font_data = ExtResource( 2 )

[sub_resource type="DynamicFont" id=3]
size = 40
font_data = ExtResource( 2 )

[sub_resource type="DynamicFont" id=4]
size = 50
font_data = ExtResource( 2 )

[sub_resource type="SpatialMaterial" id=5]
flags_unshaded = true
albedo_texture = ExtResource( 1 )

[sub_resource type="PlaneMesh" id=6]
material = SubResource( 5 )
size = Vector2( 100, 100 )

[sub_resource type="ConcavePolygonShape" id=7]
data = PoolVector3Array( 50, 0, 50, -50, 0, 50, 50, 0, -50, -50, 0, 50, -50, 0, -50, 50, 0, -50 )

[sub_resource type="CubeMesh" id=8]

[sub_resource type="BoxShape" id=9]
extents = Vector3( 1.02186, 1, 1 )

[sub_resource type="NavigationMesh" id=10]

[sub_resource type="PanoramaSky" id=11]
panorama = ExtResource( 18 )

[sub_resource type="Environment" id=12]
background_mode = 2
background_sky = SubResource( 11 )

[node name="World" type="Spatial"]

[node name="Control" type="Control" parent="."]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="GameManager" type="Node" parent="."]
script = ExtResource( 3 )
is_coop = false

[node name="PauseCanvas" type="CanvasLayer" parent="GameManager"]

[node name="PauseNode" type="Node2D" parent="GameManager/PauseCanvas"]
visible = false

[node name="PauseLabel" type="Label" parent="GameManager/PauseCanvas/PauseNode"]
margin_left = 300.0
margin_top = 92.8792
margin_right = 1003.89
margin_bottom = 338.879
custom_fonts/font = SubResource( 1 )
text = "GAME PAUSED"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="GameOverLabel" type="Label" parent="GameManager/PauseCanvas/PauseNode"]
visible = false
margin_left = 346.731
margin_top = 98.8597
margin_right = 942.731
margin_bottom = 344.86
custom_fonts/font = SubResource( 1 )
text = "GAME OVER"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Buttons" type="Node2D" parent="GameManager/PauseCanvas/PauseNode"]
position = Vector2( -6.79522, 496.013 )

[node name="ContinueButton" type="Button" parent="GameManager/PauseCanvas/PauseNode/Buttons"]
margin_left = 474.913
margin_top = -250.0
margin_right = 867.913
margin_bottom = -44.0
icon = ExtResource( 5 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="GameManager/PauseCanvas/PauseNode/Buttons/ContinueButton"]
margin_left = 30.9194
margin_top = 76.1093
margin_right = 280.919
margin_bottom = 138.109
custom_fonts/font = SubResource( 2 )
text = "CONTINUE"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="RestartButton" type="Button" parent="GameManager/PauseCanvas/PauseNode/Buttons"]
margin_left = 474.913
margin_top = -75.0
margin_right = 867.913
margin_bottom = 131.0
icon = ExtResource( 5 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="GameManager/PauseCanvas/PauseNode/Buttons/RestartButton"]
margin_left = 30.9194
margin_top = 76.1093
margin_right = 280.919
margin_bottom = 138.109
custom_fonts/font = SubResource( 2 )
text = "RESTART"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MainMenuButton" type="Button" parent="GameManager/PauseCanvas/PauseNode/Buttons"]
margin_left = 474.913
margin_top = 100.0
margin_right = 867.913
margin_bottom = 306.0
icon = ExtResource( 5 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="GameManager/PauseCanvas/PauseNode/Buttons/MainMenuButton"]
margin_left = 30.9194
margin_top = 76.1093
margin_right = 280.919
margin_bottom = 138.109
custom_fonts/font = SubResource( 3 )
text = "RETURN TO MAIN MENU"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="QuitButton" type="Button" parent="GameManager/PauseCanvas/PauseNode/Buttons"]
margin_left = 474.913
margin_top = 250.0
margin_right = 867.913
margin_bottom = 456.0
icon = ExtResource( 5 )
flat = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="GameManager/PauseCanvas/PauseNode/Buttons/QuitButton"]
margin_left = 33.2979
margin_top = 73.7309
margin_right = 283.298
margin_bottom = 135.731
custom_fonts/font = SubResource( 4 )
text = "QUIT GAME"
align = 1

[node name="MusicManager" type="Node" parent="."]
script = ExtResource( 7 )

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="MusicManager"]
volume_db = -5.0

[node name="NonPositionalSoundManager" type="Node" parent="."]
script = ExtResource( 6 )

[node name="GunPlayer" type="AudioStreamPlayer" parent="NonPositionalSoundManager"]

[node name="PickupPlayer" type="AudioStreamPlayer" parent="NonPositionalSoundManager"]

[node name="PlayerDamagePlayer" type="AudioStreamPlayer" parent="NonPositionalSoundManager"]

[node name="LootManager" type="Node" parent="."]
script = ExtResource( 9 )
pickup_drop_chance = 2
powerup_drop_chance = 3

[node name="WaveManager" type="Node" parent="."]
script = ExtResource( 4 )

[node name="Environment" type="Spatial" parent="."]
__meta__ = {
"_edit_lock_": true
}

[node name="Ground" type="MeshInstance" parent="Environment"]
mesh = SubResource( 6 )
material/0 = null

[node name="StaticBody" type="StaticBody" parent="Environment/Ground"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/Ground/StaticBody"]
shape = SubResource( 7 )

[node name="CSGMesh" type="CSGMesh" parent="Environment"]
transform = Transform( 49.6531, 0, 0, 0, 3.75747, 0, 0, 0, 1, 0, 4.1333, -48.7592 )
mesh = SubResource( 8 )
material = ExtResource( 17 )

[node name="StaticBody" type="StaticBody" parent="Environment/CSGMesh"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/CSGMesh/StaticBody"]
shape = SubResource( 9 )

[node name="CSGMesh3" type="CSGMesh" parent="Environment"]
transform = Transform( 49.6531, 0, 0, 0, 3.75747, 0, 0, 0, 1, 0, 4.1333, 49.2408 )
mesh = SubResource( 8 )
material = ExtResource( 17 )

[node name="StaticBody" type="StaticBody" parent="Environment/CSGMesh3"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/CSGMesh3/StaticBody"]
shape = SubResource( 9 )

[node name="CSGMesh4" type="CSGMesh" parent="Environment"]
transform = Transform( -8.08952e-06, 0, 1, 0, 3.75747, 0, -49.6531, 0, -1.62921e-07, -49, 4.1333, 2.2408 )
mesh = SubResource( 8 )
material = ExtResource( 17 )

[node name="StaticBody" type="StaticBody" parent="Environment/CSGMesh4"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/CSGMesh4/StaticBody"]
shape = SubResource( 9 )

[node name="CSGMesh5" type="CSGMesh" parent="Environment"]
transform = Transform( -8.08952e-06, 0, 1, 0, 3.75747, 0, -49.6531, 0, -1.62921e-07, -49, 4.1333, 2.2408 )
mesh = SubResource( 8 )
material = ExtResource( 17 )

[node name="StaticBody" type="StaticBody" parent="Environment/CSGMesh5"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/CSGMesh5/StaticBody"]
shape = SubResource( 9 )

[node name="CSGMesh6" type="CSGMesh" parent="Environment"]
transform = Transform( -8.08952e-06, 0, 1, 0, 3.75747, 0, -49.6531, 0, -1.62921e-07, 50, 4.1333, 0.240803 )
mesh = SubResource( 8 )
material = ExtResource( 17 )

[node name="StaticBody" type="StaticBody" parent="Environment/CSGMesh6"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/CSGMesh6/StaticBody"]
shape = SubResource( 9 )

[node name="Navigation" type="Navigation" parent="."]

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="Navigation"]
navmesh = SubResource( 10 )

[node name="RangedEnemy" parent="Navigation" instance=ExtResource( 20 )]
transform = Transform( 4, 0, 0, 0, 4, 0, 0, 0, 4, 0, 0, -37.6798 )

[node name="RangedBossEnemy" parent="Navigation" instance=ExtResource( 19 )]
transform = Transform( 6, 0, 0, 0, 6, 0, 0, 0, 6, 40.0252, 0, 0 )

[node name="Machinegun_Ammo_Pickup" parent="." instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -23 )

[node name="RocketLauncher_Ammo_Pickup" parent="." instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -26, 1, 0 )

[node name="Shotgun_Ammo_Pickup" parent="." instance=ExtResource( 8 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 19 )

[node name="Health_Pickup" parent="." instance=ExtResource( 12 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -12.792, 1.43883, 6.26827 )

[node name="Armor_Pickup" parent="." instance=ExtResource( 13 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -12.792, 1.43883, -10.6918 )
amount = 15

[node name="Powerup_Undying" parent="." instance=ExtResource( 15 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -17.672, 1.27957, -21.6274 )

[node name="Powerup_Quad_Damage" parent="." instance=ExtResource( 14 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -13.2815, 1.27957, -22 )

[node name="Powerup_Speed_Boost" parent="." instance=ExtResource( 16 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -21.0916, 0.995337, -21.0925 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 12 )
[connection signal="button_up" from="GameManager/PauseCanvas/PauseNode/Buttons/ContinueButton" to="GameManager" method="toggle_pause"]
[connection signal="button_up" from="GameManager/PauseCanvas/PauseNode/Buttons/RestartButton" to="GameManager" method="restart_game"]
[connection signal="button_up" from="GameManager/PauseCanvas/PauseNode/Buttons/MainMenuButton" to="GameManager" method="quit_game"]
[connection signal="button_up" from="GameManager/PauseCanvas/PauseNode/Buttons/QuitButton" to="GameManager" method="exit_game"]
